<form method="post" action="/submit-driver-ratings">
    <div th:each="entry : ${driversByCategory}">
        <h2 th:text="${entry.key}" style="color:#00509e; margin-top: 2rem;">Kategori</h2>

        <div th:each="driver, iterStat : ${entry.value}" class="driver-card">
            <h3 th:text="${driver.driverName}">Driver AdÄ±</h3>
            <input type="hidden" name="ratings[__${iterStat.index}__].name" th:value="${driver.driverName}" />

            <!-- Impact Rating -->
            <div class="rating-group">
                <label>Impact:</label>
                <div class="rating-bar" th:attr="data-name='ratings[__${iterStat.index}__].impact'">
                    <div class="rating-segment" data-value="1"></div>
                    <div class="rating-segment" data-value="2"></div>
                    <div class="rating-segment" data-value="3"></div>
                    <div class="rating-segment" data-value="4"></div>
                    <div class="rating-segment" data-value="5"></div>
                </div>
                <div class="rating-labels">
                    <span>None</span>
                    <span>Medium</span>
                    <span>Very High</span>
                </div>
                <input type="hidden" name="ratings[__${iterStat.index}__].impact" required />
            </div>

            <!-- Uncertainty Rating -->
            <div class="rating-group">
                <label>Uncertainty:</label>
                <div class="rating-bar" th:attr="data-name='ratings[__${iterStat.index}__].uncertainty'">
                    <div class="rating-segment" data-value="1"></div>
                    <div class="rating-segment" data-value="2"></div>
                    <div class="rating-segment" data-value="3"></div>
                    <div class="rating-segment" data-value="4"></div>
                    <div class="rating-segment" data-value="5"></div>
                </div>
                <div class="rating-labels">
                    <span>None</span>
                    <span>Medium</span>
                    <span>Very High</span>
                </div>
                <input type="hidden" name="ratings[__${iterStat.index}__].uncertainty" required />
            </div>
        </div>
    </div>

    <button type="submit" class="submit-button">Save</button>
</form>